(this.webpackJsonpclientapp=this.webpackJsonpclientapp||[]).push([[0],{119:function(e,t,r){},128:function(e,t,r){},154:function(e,t,r){},254:function(e,t,r){},255:function(e,t,r){},256:function(e,t,r){},257:function(e,t,r){},259:function(e,t,r){},260:function(e,t,r){},261:function(e,t,r){},262:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),o=r(31),s=r.n(o),c=r(12),i=r(13),l=r(15),u=r(14),p=r(16),d=r(267),j=r(264),h=r(271),v=r(25),b=(r(128),r(11)),m=r(26),O=r(9),f=r.n(O),g=r(18),x="FETCH_USERS",y="UPDATE_USER",T="DELETE_USER",w="REGISTER",E="LOGIN",S="LOG_OUT",I="VOTE_MOVIE_SUCCESS",_="VOTE_MOVIE_ERROR",k="GET_TOP_MOVIES",M="ADD_VOTE",U="GET_ALL_APP_MOVIES",N=r(35),C=r.n(N),V=C.a.create({baseURL:"http://localhost:3001"}),A=function(){var e=Object(g.a)(f.a.mark((function e(t){var r,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},e.next=3,V.get("/users");case 3:return(n=e.sent).data.length>0&&(r=n.data.find((function(e){return e.email===t}))),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=r(22),P=Object(R.a)(),D=r(1),L=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).logOut=function(){e.props.logOut(),localStorage.clear(),setTimeout((function(){return P.push("/")}),2e3)},e}return Object(i.a)(r,[{key:"render",value:function(){return Object(D.jsx)(d.a,{className:"navbar nav-link",expand:"lg",children:Object(D.jsxs)(j.a,{children:[Object(D.jsx)(d.a.Brand,{href:"#"}),Object(D.jsx)(d.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(D.jsx)(d.a.Collapse,{id:"basic-navbar-nav",children:Object(D.jsxs)(h.a,{className:"me-auto navs",children:[Object(D.jsx)(h.a.Link,{as:v.b,exact:!0,to:"/",className:"nav-link",activeStyle:{color:"rgb(245, 222, 20)"},children:"Home"}),this.props.loggedInUser.isSignedIn?Object(D.jsx)(h.a.Link,{className:"nav-link",children:Object(D.jsx)("button",{className:"logout",onClick:this.logOut,children:"Log Out"})}):Object(D.jsx)(h.a.Link,{as:v.b,to:"/Login",className:"nav-link",activeStyle:{color:"rgb(245, 222, 20)"},children:"SignIn"})]})})]})})}}]),r}(a.a.Component),F=Object(b.b)((function(e){return{loggedInUser:e.loggedInUser}}),{logOut:function(){return localStorage.clear(),{type:S}}})(L),G=r(270),Y=r(268),B=r(269),H=C.a.create({baseURL:"https://movie-database-imdb-alternative.p.rapidapi.com",headers:{"x-rapidapi-key":"ed45f75767mshfdddb27fe2b71a6p1453c4jsn9e40c13eb6e0","x-rapidapi-host":"movie-database-imdb-alternative.p.rapidapi.com"}}),q=function(e,t){try{return function(){var r=Object(g.a)(f.a.mark((function r(n){var a;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,H.get("",{params:{page:t.toString(),s:e}});case 2:a=r.sent,console.log(a),a.data.Error&&n({type:"MOVIE_NOT_FOUND",payload:a.data.Error}),a.data.Search&&n({type:"SEARCH_MOVIES_SUCCESS",payload:a.data.Search});case 6:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}catch(r){console.log(r)}},Z=function(e){return function(t){return new Promise((function(r,n){H.get("",{params:{i:e,plot:"full"}}).then((function(e){e.data.Title&&(t({type:"FETCH_MOVIE_SUCCESS",payload:e.data}),r()),e.data.Error&&(console.log(e.data.Error),t({type:"FETCH_MOVIE_ERROR",payload:e.data.Error}),n())}))}))}},W=(r(154),function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).renderInput=function(e){return Object(D.jsx)("div",{style:{width:"30%",margin:"auto"},children:Object(D.jsxs)(B.a.Group,{children:[Object(D.jsx)(B.a.Label,{className:"label",children:"Search your Movie!"}),Object(D.jsx)(B.a.Control,Object(m.a)({},e.input))]})})},e.onSubmit=function(t){e.props.searchMovies(t.title,1),P.push("/results/".concat(t.title,"/1"))},e}return Object(i.a)(r,[{key:"render",value:function(){return Object(D.jsx)("div",{className:"searchFormDiv",children:Object(D.jsx)(B.a,{className:"search",onSubmit:this.props.handleSubmit(this.onSubmit),children:Object(D.jsx)(G.a,{name:"title",component:this.renderInput})})})}}]),r}(a.a.Component)),J=Object(Y.a)({form:"Search"})(W),X=Object(b.b)((function(e){return{movies:e.imdbMovies}}),{searchMovies:q})(J),$=r(265),z=function(){var e=Object(b.c)((function(e){return e.loggedInUser}));return Object(D.jsx)("div",{children:Object(D.jsx)(v.a,{to:function(){return null===e.token?"/login":"/search"},children:Object(D.jsx)($.a,{className:"signInBtn btn",variant:"outline-danger",children:"Vote!"})})})},K=r.p+"static/media/logo.70c45592.png",Q=(r(254),function(){return Object(D.jsx)("div",{className:"back",children:Object(D.jsxs)("div",{className:"title",children:[Object(D.jsx)("div",{className:"logodiv",children:Object(D.jsx)("img",{src:K,className:"logo",alt:" logo"})}),Object(D.jsx)("div",{className:"seetop10",children:Object(D.jsx)(v.a,{to:"/topMovies",children:Object(D.jsx)($.a,{className:"seetop10Btn btn",variant:"outline-warning",children:"Latest Top10!"})})}),Object(D.jsx)("div",{className:"signIn",children:Object(D.jsx)(z,{})})]})})}),ee=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return Object(D.jsxs)("div",{children:[Object(D.jsx)(X,{}),Object(D.jsx)(Q,{})]})}}]),r}(a.a.Component),te=r(266),re=r(40),ne=C.a.create({baseURL:"http://localhost:3001"}),ae=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},oe=function(e){var t=ae();return function(){var r=Object(g.a)(f.a.mark((function r(n){var a;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ne.get("/top10/?user=".concat(e,"&date=").concat(t));case 2:a=r.sent,n({type:"GET_CURRENT_TOP10",payload:a.data[0]});case 4:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()},se=function(){return function(){var e=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.get("/top10");case 2:r=e.sent,t({type:"GET_TOP10S",payload:r.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ce=r(23),ie=(r(119),function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={passwordShown:!1},e.togglePassword=function(){e.setState({passwordShown:!e.state.passwordShown})},e.showErrors=function(e){return e.touched&&e.error?Object(D.jsx)("div",{children:e.error}):null},e.renderInput=function(t){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(B.a.Label,{children:t.label}),Object(D.jsxs)(te.a,{className:"mb-3",children:[Object(D.jsx)(B.a.Control,Object(m.a)(Object(m.a)({},t.input),{},{type:t.type,placeholder:t.placeholder})),t.icon?Object(D.jsx)(te.a.Append,{children:Object(D.jsx)(te.a.Text,{children:Object(D.jsx)("i",{className:t.icon,onClick:e.togglePassword})})}):null]}),Object(D.jsx)(B.a.Control.Feedback,{type:"invalid",style:{display:"block",color:"rgb(247, 10, 120)"},children:e.showErrors(t.meta)})]})},e.onSubmit=function(t){e.props.login(t),setTimeout((function(){e.props.createTop10OfDay(e.props.loggedInUser.id),e.props.loggedInUser.isSignedIn&&ce.b.warning("Welcome ".concat(e.props.loggedInUser.username,"!")),null===e.props.error||e.props.loggedInUser.isSignedIn||(console.log(e.props.error),ce.b.error("Incorrect username or Password"))}),1e3),setTimeout((function(){return P.push("/")}),5e3)},e}return Object(i.a)(r,[{key:"render",value:function(){return Object(D.jsxs)("div",{className:"container login",children:[Object(D.jsxs)(B.a,{onSubmit:this.props.handleSubmit(this.onSubmit),children:[Object(D.jsx)(G.a,{label:"Email address",name:"email",type:"email",placeholder:"email",component:this.renderInput}),Object(D.jsx)(G.a,{name:"password",label:"Password",type:this.state.passwordShown?"text":"password",placeholder:"Password",component:this.renderInput,icon:"bi bi-eye"}),Object(D.jsx)($.a,{variant:"outline-warning",type:"submit",children:"Sign me In"}),Object(D.jsx)("div",{className:"registerBtn",children:Object(D.jsx)(v.a,{to:"/signup",children:Object(D.jsx)($.a,{variant:"outline-danger",children:"Don't have an account? Register to Vote!"})})})]}),Object(D.jsx)(ce.a,{})]})}}]),r}(a.a.Component)),le=Object(Y.a)({form:"Login",validate:function(e){var t={};return e.email&&e.password||(t.email="Please enter email.",t.password="Please enter password."),/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"),console.log(t),t}})(ie),ue=Object(b.b)((function(e){return{loggedInUser:e.loggedInUser,error:e.error}}),{login:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,A(e.email);case 3:return n=t.sent,t.next=6,V.post("/login",Object(m.a)({},e));case 6:a=t.sent,r({type:E,payload:{email:e.email,username:n.username,id:n.id,token:a.data.accessToken,isSignedIn:!0}}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),"Cannot find user"===t.t0.response.data&&r({type:"INCORRECT_USERNAME_OR_PASSWORD",payload:t.t0.response.data});case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},createTop10OfDay:function(e){var t=ae();return function(){var r=Object(g.a)(f.a.mark((function r(n){var a,o;return f.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,ne.get("/top10/?user=".concat(e,"&date=").concat(t));case 2:if(0!==(a=r.sent).data.length){r.next=11;break}return r.next=6,ne.post("/top10/",{date:t,user:e,movies:[],votes:0});case 6:o=r.sent,n({type:"CREATE_TOP10_FOR_USER",payload:o.data}),n({type:"GET_CURRENT_TOP10",payload:o.data}),r.next=13;break;case 11:console.log(a.data),n({type:"GET_CURRENT_TOP10",payload:a.data[0]});case 13:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})(le),pe=C.a.create({baseURL:"http://localhost:3001"}),de=function(e){return{type:_,payload:e}},je=function(){return function(){var e=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.get("/movies");case 2:r=e.sent,t({type:U,payload:r.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},he=(r(255),function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={movieVotes:0,userTop10Votes:0},e.runMoreRequests=function(){e.props.fetchCurrentTop10OfUser(e.props.loggedInUser.id)},e.doesMovieExistInAppMovies=function(){return e.props.movies.some((function(t){return t.id===e.props.id}))},e.movieAlreadyVoted=function(t){return t.some((function(t){return t===e.props.movie.data.Title}))},e.getMovieById=function(t){return e.props.movies.find((function(e){return e.id===t}))},e.getTodayDate=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},e.userTop10VoteSucceeded=function(){return e.props.currentTopListOfUser.votes>e.state.userTop10Votes},e.voteFirstTime=function(){e.props.voteMovie(e.props.movie),setTimeout((function(){return e.renderMessageFirstVoted()}),1e3)},e.voteAgain=function(){e.setState({votes:e.getMovieById(e.props.id).Votes}),e.props.addVote(e.props.id),setTimeout((function(){return e.renderMessageVotedAgain()}),1e3)},e.vote=function(){e.props.loggedInUser.isSignedIn?(e.runMoreRequests(),setTimeout((function(){e.setState({userTop10Votes:e.props.currentTopListOfUser.votes}),e.movieAlreadyVoted(e.props.currentTopListOfUser.movies)?(ce.b.error("You have already voted for that movie today!"),setTimeout((function(){return P.goBack()}),5e3)):e.props.addVoteToTop10(e.props.loggedInUser.id,e.props.movie),e.doesMovieExistInAppMovies()?e.voteAgain():e.voteFirstTime()}),2e3)):(ce.b.error("Please sign In in order to Vote!"),setTimeout((function(){return P.push("/login")}),5e3))},e.renderMessageFirstVoted=function(){var t=e.props.currentTopListOfUser;setTimeout((function(){var r=t.votes,n=e.userTop10VoteSucceeded();void 0!==e.props.movies.find((function(t){return t.Title===e.props.movie.data.Title}))&&n&&e.renderVoteSuccess(e.props.loggedInUser.username,r)}),2e3)},e.renderVoteSuccess=function(t,r){e.state.userTop10Votes<9&&(ce.b.success("Thank you for your vote ".concat(t,"! You have a maximum of ").concat(10-r," votes left for today to complete your top10!")),setTimeout((function(){return P.goBack()}),5e3)),9===e.state.userTop10Votes&&(ce.b.success("Your top10 is Complete ".concat(t,"! Thank you for voting!")),setTimeout((function(){return P.push("/completeTop10/".concat(e.props.loggedInUser.id))}),5e3))},e.renderMessageVotedAgain=function(){var t=e.props.currentTopListOfUser.votes,r=e.userTop10VoteSucceeded();e.props.movies.find((function(t){return t.Title===e.props.movie.data.Title})).Votes>e.state.movieVotes&&r&&e.renderVoteSuccess(e.props.loggedInUser.username,t)},e.renderError=function(){if(null!==e.props.movie.error)return Object(D.jsx)("div",{style:{color:"white",textAlign:"center"},children:e.props.movie.error})},e.renderMovie=function(){return e.props.movie.data?Object(D.jsxs)("div",{className:"movie_card",id:"bright",children:[Object(D.jsx)("div",{className:"info_section",children:Object(D.jsxs)("div",{className:"movie_header",children:["N/A"===e.props.movie.data.Poster?Object(D.jsx)("div",{style:{color:"white"},children:"Poster not available in Server"}):Object(D.jsx)("img",{className:"locandina",src:e.props.movie.data.Poster}),Object(D.jsxs)("div",{className:"allText",children:[Object(D.jsx)("h1",{className:"txt",children:e.props.movie.data.Title}),Object(D.jsx)("h5",{className:"txt",children:"".concat(e.props.movie.data.Year," , ").concat(e.props.movie.data.Director)}),Object(D.jsx)("h4",{className:"txt",children:e.props.movie.data.Actors}),Object(D.jsx)("h6",{className:"txt",children:"Writen by: ".concat(e.props.movie.data.Writer)}),Object(D.jsx)("p",{className:" txt  type",children:e.props.movie.data.Genre}),"N/A"!==e.props.movie.Awards?Object(D.jsx)("p",{className:" txt  type",children:e.props.movie.data.Awards}):null,Object(D.jsx)("div",{className:"movie_desc",children:Object(D.jsx)("p",{className:" txt text",children:e.props.movie.data.Plot})}),Object(D.jsxs)("div",{children:[Object(D.jsx)($.a,{onClick:e.vote,variant:"outline-danger",children:"Vote for it!"}),Object(D.jsx)($.a,{onClick:function(){return P.push("/completeTop10/".concat(e.props.loggedInUser.id))},variant:"outline-warning",children:"I am Done Voting"}),Object(D.jsx)(ce.a,{})]})]})]})}),Object(D.jsx)("div",{className:"blur_back bright_back"})]}):Object(D.jsx)("div",{children:"..."})},e}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchMovie(this.props.id),this.props.getAllAppMovies(),this.props.getTop10s()}},{key:"render",value:function(){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{children:this.renderError()}),Object(D.jsx)("div",{children:this.renderMovie()})]})}}]),r}(a.a.Component)),ve=Object(b.b)((function(e,t){return{id:t.match.params.id,movie:e.selectedMovie,movies:e.movies,loggedInUser:e.loggedInUser,usersTop10s:e.allUserTop10,currentTopListOfUser:e.currentTopListOfUser}}),{fetchMovie:Z,voteMovie:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pe.post("/movies",{Title:e.data.Title,Year:e.data.Year,id:e.data.imdbID,Poster:e.data.Poster,Votes:1});case 3:(n=t.sent).data.Title&&r((a=n.data,{type:I,payload:a})),n.data.Error&&(console.log(n.data.Error),r(de(n.data.Error))),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),r(de(t.t0));case 11:case"end":return t.stop()}var a}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},getAllAppMovies:je,addVoteToTop10:function(e,t){var r=ae();try{return function(){var n=Object(g.a)(f.a.mark((function n(a){var o,s,c;return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ne.get("/top10/?user=".concat(e,"&date=").concat(r));case 2:if(o=n.sent,0===Object.keys(o.data).length){n.next=11;break}return s=o.data[0],console.log(s),n.next=8,ne.put("/top10/".concat(s.id),{date:s.date,user:s.user,votes:s.votes+1,movies:[].concat(Object(re.a)(s.movies),[t.data.Title])});case 8:c=n.sent,a({type:"ADD_VOTE_TO_TOP10",payload:c.data}),a({type:"GET_CURRENT_TOP10",payload:c.data});case 11:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}catch(n){console.log(n)}},getTop10s:se,fetchCurrentTop10OfUser:oe,addVote:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){var n,a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe.get("/movies/".concat(e));case 2:if(!(n=t.sent).data){t.next=8;break}return t.next=6,pe.put("/movies/".concat(e),Object(m.a)(Object(m.a)({},n.data),{},{Votes:n.data.Votes+1}));case 6:a=t.sent,r({type:M,payload:a.data});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(he),be=r(273),me=(r(256),function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return this.props.movie?Object(D.jsx)("div",{className:"movie",children:Object(D.jsxs)(be.a,{className:"card",style:{width:"18rem"},children:[Object(D.jsx)(be.a.Img,{className:"image",variant:"top",src:this.props.movie.Poster}),Object(D.jsxs)(be.a.Body,{className:"cardBody",children:[Object(D.jsx)(be.a.Title,{className:"cardText",children:this.props.movie.Title}),Object(D.jsx)("div",{className:"cardText",children:Object(D.jsxs)(be.a.Text,{children:["Year : ",this.props.movie.Year]})})]}),Object(D.jsx)("div",{className:"more",children:Object(D.jsx)(v.a,{className:"button button-primary",to:"/movie/".concat(this.props.movie.imdbID),children:Object(D.jsx)($.a,{variant:"outline-warning",children:"More"})})})]})}):null}}]),r}(a.a.Component)),Oe=Object(b.b)((function(e,t){return{movie:t.movie}}),{searchMovies:q,fetchMovie:Z})(me),fe=(r(257),function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){if(this.props.movies.length>0){var e=this.props.movies.map((function(e,t){return Object(D.jsx)("div",{className:"item",children:Object(D.jsx)(Oe,{movie:e})},t)}));return Object(D.jsx)("div",{className:"grid",children:e})}}}]),r}(a.a.Component)),ge=Object(b.b)((function(e,t){return{keyword:t.keyword,page:t.page,movies:t.movies}}),{searchMovies:q})(fe),xe=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).renderError=function(){if(null!==e.props.error)return Object(D.jsx)("h3",{style:{color:"red",textAlign:"center"},children:e.props.error})},e.renderMovieList=function(){if(e.props.movies.length>0)return Object(D.jsxs)("div",{children:[Object(D.jsx)(X,{}),Object(D.jsx)("div",{children:Object(D.jsx)(ge,{movies:e.props.movies})}),Object(D.jsxs)("div",{className:"moreBtnDiv",children:[Object(D.jsxs)($.a,{onClick:e.showMore,variant:"danger",children:["Load more Movies ",Object(D.jsx)("i",{className:"bi bi-arrow-right-square"})]}),Object(D.jsx)("br",{}),e.props.loggedInUser.isSignedIn?Object(D.jsx)($.a,{onClick:function(){return P.push("/completeTop10/".concat(e.props.loggedInUser.id))},variant:"outline-warning",children:"I am Done Voting"}):null]})]})},e.showMore=function(){var t=parseInt(e.props.page)+1;e.props.searchMovies(e.props.keyword,t),setTimeout((function(){return P.push("/results/".concat(e.props.keyword,"/").concat(t))}),0)},e}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.props.searchMovies(this.props.match.params.keyword,parseInt(this.props.match.params.page))}},{key:"render",value:function(){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{children:this.renderError()}),Object(D.jsx)("div",{children:this.renderMovieList()})]})}}]),r}(a.a.Component),ye=Object(b.b)((function(e,t){return{keyword:t.match.params.keyword,page:t.match.params.page,movies:e.imdbMovies,loggedInUser:e.loggedInUser,error:e.error}}),{searchMovies:q})(xe),Te=(r(258),function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={passwordShown:!1,emailExists:!1},e.showErrors=function(e){return e.touched&&e.error?Object(D.jsx)("div",{children:e.error}):null},e.togglePassword=function(){e.setState({passwordShown:!e.state.passwordShown})},e.renderInput=function(t){return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(B.a.Label,{children:t.label}),Object(D.jsxs)(te.a,{className:"mb-3",children:[Object(D.jsx)(B.a.Control,Object(m.a)(Object(m.a)({},t.input),{},{type:t.type,placeholder:t.placeholder})),t.icon?Object(D.jsx)(te.a.Append,{children:Object(D.jsx)(te.a.Text,{children:Object(D.jsx)("i",{className:t.icon,onClick:e.togglePassword})})}):null]}),Object(D.jsx)(B.a.Control.Feedback,{type:"invalid",style:{display:"block",color:"rgb(247, 10, 120)"},children:e.showErrors(t.meta)})]})},e.doesEmailExist=function(t){return e.props.users.some((function(e){return e.email===t.email}))},e.onSubmit=function(t){console.log(t),e.doesEmailExist(t)?(e.setState({emailExists:!0}),ce.b.error("Email Already Exists! Sign in if you already have an account.")):(e.props.register(t),ce.b.success("Registration sucessfull!"),setTimeout((function(){return P.push("/login")}),3e3))},e.renderHidden=function(e){return Object(D.jsx)("input",{type:e.type,value:e.value})},e}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.props.fetchUsers()}},{key:"render",value:function(){return Object(D.jsxs)("div",{className:"container login",children:[Object(D.jsxs)(B.a,{onSubmit:this.props.handleSubmit(this.onSubmit),children:[Object(D.jsx)(G.a,{name:"username",type:"text",component:this.renderInput,placeholder:"Username",label:"Username"}),Object(D.jsx)(G.a,{name:"email",type:"email",component:this.renderInput,placeholder:"Email",label:"Email address"}),Object(D.jsx)(G.a,{name:"password",type:this.state.passwordShown?"text":"password",component:this.renderInput,placeholder:"password",label:"Password",icon:"bi bi-eye"}),Object(D.jsx)(G.a,{name:"password2",type:this.state.passwordShown?"text":"password",component:this.renderInput,placeholder:"Confirm Password",label:"Password",icon:"bi bi-eye"}),Object(D.jsx)("br",{}),Object(D.jsx)(G.a,{name:"isSignedIn",type:"hidden",value:!1,component:this.renderHidden}),Object(D.jsx)($.a,{variant:"secondary",type:"submit",children:"Create My Account!"})]}),Object(D.jsx)(ce.a,{})]})}}]),r}(a.a.Component)),we=Object(Y.a)({form:"SignUp",validate:function(e){var t={};return e.username||(t.username="Required"),e.password||(t.password="Required"),e.password2||(t.password2="Required"),e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e.email)||(t.email="Invalid email address"):t.email="Required",e.username&&e.username.length<3&&(t.username="Username must be over 2 characters"),e.password&&e.password.length<4&&(t.password="Password must be at least 4 characters"),e.password2&&e.password!==e.password2&&(t.password2="Passwords don't match"),t}})(Te),Ee=Object(b.b)((function(e){return{users:e.users}}),{register:function(e){return function(){var t=Object(g.a)(f.a.mark((function t(r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.post("/users",{email:e.email,password:e.password,username:e.username});case 3:t.sent,r({type:w,payload:{email:e.email,username:e.username,token:null,isSignedIn:!1}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},fetchUsers:function(){try{return function(){var e=Object(g.a)(f.a.mark((function e(t){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.get("/users");case 2:r=e.sent,t({type:x,payload:r.data});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}catch(e){console.log(e)}}})(we),Se=(r(259),function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return Object(D.jsxs)("div",{className:"display",children:[Object(D.jsxs)("h3",{children:[" ","".concat(this.props.position," . ").concat(this.props.movie.Title)]}),Object(D.jsx)("div",{className:"cardImgDiv",children:Object(D.jsx)("img",{className:"cardImg",src:this.props.movie.Poster,alt:"Poster"})}),Object(D.jsxs)("div",{className:"votes",children:[Object(D.jsx)("h6",{children:this.props.movie.Year}),Object(D.jsx)("h5",{children:"Total Votes: ".concat(this.props.movie.Votes)})]})]})}}]),r}(a.a.Component)),Ie=(r(260),function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.props.getTopMovies()}},{key:"render",value:function(){var e=this.props.top10.map((function(e,t){return Object(D.jsx)("div",{className:"topMovieDisplayDiv",children:Object(D.jsx)(Se,{position:t+1,movie:e})},t)}));return Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{children:e}),Object(D.jsx)("div",{className:"signIn",children:Object(D.jsx)(z,{})})]})}}]),r}(a.a.Component)),_e=Object(b.b)((function(e){return{top10:e.top10AppMovies}}),{getTopMovies:function(){var e=[];return function(){var t=Object(g.a)(f.a.mark((function t(r){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pe.get("/movies");case 2:n=t.sent,console.log(n.data),n.data.length>0&&(e=n.data.sort((function(e,t){return e.Votes<t.Votes||e.Votes===t.Votes&&e.Title>t.Title?1:-1}))),console.log(e.length),e.length>9&&(e=e.slice(0,10)),r({type:k,payload:e});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}})(Ie),ke=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(c.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={userMovies:[]},e.getMovieData=function(){var t=[];if(0!==Object.keys(e.props.currentTopListOfUser).length)for(var r=e.props.currentTopListOfUser.movies,n=e.props.appMovies,a=0;a<n.length;a++)for(var o=n[a].Title,s=0;s<r.length;s++)o===r[s]&&t.push(n[a]);return t},e}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.props.getAllAppMovies(),this.props.getTop10s(),this.props.fetchCurrentTop10OfUser(this.props.userId)}},{key:"render",value:function(){var e=[],t=this.getMovieData();return 0!==t.length&&(e=t.map((function(e,t){return Object(D.jsx)("div",{className:"topMovieDisplayDiv",children:Object(D.jsx)(Se,{position:t+1,movie:e})},t)}))),Object(D.jsx)("div",{children:0!==this.props.currentTopListOfUser.movies.length?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("h2",{style:{color:"red",textAlign:"center"},children:"Your Top Movies List!"}),Object(D.jsx)("div",{children:e})]}):Object(D.jsx)("h3",{style:{color:"red",textAlign:"center"},children:"You havent voted any Movies yet."})})}}]),r}(a.a.Component),Me=Object(b.b)((function(e,t){return{userId:t.match.params.id,appMovies:e.movies,allTop10s:e.allUserTop10,currentTopListOfUser:e.currentTopListOfUser}}),{getAllAppMovies:je,getTop10s:se,fetchCurrentTop10OfUser:oe})(ke);function Ue(){return Object(D.jsxs)(p.c,{children:[Object(D.jsx)(p.a,{exact:!0,path:"/",component:ee}),Object(D.jsx)(p.a,{exact:!0,path:"/search",component:X}),Object(D.jsx)(p.a,{path:"/results/:keyword/:page",component:ye}),Object(D.jsx)(p.a,{exact:!0,path:"/movie/:id",component:ve}),Object(D.jsx)(p.a,{exact:!0,path:"/topMovies",component:_e}),Object(D.jsx)(p.a,{exact:!0,path:"/login",component:ue}),Object(D.jsx)(p.a,{exact:!0,path:"/signup",component:Ee}),Object(D.jsx)(p.a,{exact:!0,path:"/completeTop10/:id",component:Me})]})}r(261);var Ne=function(e){Object(l.a)(r,e);var t=Object(u.a)(r);function r(){return Object(c.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return Object(D.jsxs)(p.b,{history:P,children:[Object(D.jsx)(F,{}),Object(D.jsx)(Ue,{})]})}}]),r}(a.a.Component),Ce=r(17),Ve=r(272),Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_MOVIES_SUCCESS":return t.payload;default:return e}},Re={error:null,data:null},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_MOVIE_SUCCESS":return{data:t.payload,error:null};case"FETCH_MOVIE_ERROR":return{data:null,error:t.payload};default:return e}},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.payload;case E:case y:return e.map((function(e){return e.email===t.payload.email?t.payload:e}));case T:return e.filter((function(e){return e.email!==t.payload.email}));default:return e}},Le={id:0,email:null,username:null,token:null,isSignedIn:null,top10:[]},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:case E:return t.payload;case S:return Le;default:return e}},Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case U:return t.payload;case I:return[].concat(Object(re.a)(e),[t.payload]);case _:return e;case M:var r=Object(re.a)(e);return r.map((function(e){t.payload.id===e.id&&(e.Votes=t.payload.Votes)})),r;default:return e}},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TOP10S":return t.payload;case"CREATE_TOP10_FOR_USER":return[].concat(Object(re.a)(e),[t.payload]);case"ADD_VOTE_TO_TOP10":var r=Object(re.a)(e);return r.map((function(e){t.payload.id===e.id&&(e.votes=t.payload.votes,e.movies=t.payload.movies)})),r;default:return e}},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return t.payload;default:return e}},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CURRENT_TOP10":return t.payload;default:return e}},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MOVIE_NOT_FOUND":case"INCORRECT_USERNAME_OR_PASSWORD":return t.payload;default:return e}},Ze=Object(Ce.c)({imdbMovies:Ae,form:Ve.a,selectedMovie:Pe,users:De,loggedInUser:Fe,movies:Ge,top10AppMovies:Be,allUserTop10:Ye,currentTopListOfUser:He,error:qe}),We=r(123),Je=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return}}(),Xe=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25})||Ce.d,$e=Object(Ce.e)(Ze,Je,Xe(Object(Ce.a)(We.a)));$e.subscribe((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(r){console.log(r)}}({loggedInUser:$e.getState().loggedInUser,currentTopListOfUser:$e.getState().currentTopListOfUser})})),s.a.render(Object(D.jsx)(b.a,{store:$e,children:Object(D.jsx)(Ne,{})}),document.querySelector("#root"))}},[[262,1,2]]]);
//# sourceMappingURL=main.be42f5a1.chunk.js.map